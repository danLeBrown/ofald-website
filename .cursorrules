# OFALD Website Revamp - Cursor IDE Rules

## Project Overview
Modern, accessible Nuxt.js 3 website for Olubukola Foundation for Autism and Learning Disability (OFALD) with TypeScript, Pinia, Tailwind CSS, and WCAG AAA compliance.

## Tech Stack
- **Framework**: Nuxt 3 (Vue 3) with SSR
- **Language**: TypeScript (strict mode)
- **Styling**: Tailwind CSS
- **State Management**: Pinia
- **Content Management**: Nuxt Content (for events/blog)
- **Package Manager**: pnpm
- **Bundler**: Vite (built into Nuxt 3)

## Code Quality Standards

### Linting & Formatting
- **ESLint**: Run `pnpm lint` before committing
- **Prettier**: Auto-format with `pnpm format`
- **Pre-commit hooks**: Automatically run lint-staged (ESLint + Prettier + TypeCheck)
- **Never commit code with linting errors**

### Type Checking
- **TypeScript**: Strict mode enabled
- **Type checking**: Run `pnpm typecheck` before committing
- **Type errors**: Must be fixed before committing
- **Note**: Currently `typeCheck: false` in nuxt.config.ts due to vue-tsc dependency issues, but typecheck script still runs

### File Organization
- Components in `components/` with subfolders: `layout/` and `ui/`
- Auto-import naming: Components in folders use prefix (e.g., `UiButton` for `components/ui/Button.vue`)
- Pages in `pages/` directory
- Composables in `composables/` directory
- Stores in `stores/` directory

## Accessibility Requirements (WCAG AAA)

### Typography
- **Headings**: Lexend Deca font (weights: 400, 600, 700)
- **Body**: Atkinson Hyperlegible font (weights: 400, 700)
- **Base font size**: 18px minimum
- **Line height**: 1.6 for body, 1.3 for headings
- **Max line length**: 70ch (70-80 characters)

### Color & Contrast
- **Minimum contrast**: WCAG AAA (7:1 ratio)
- **Links**: Always underlined by default
- **Focus indicators**: 3px outline minimum
- **High contrast mode**: Available via toggle

### Interactive Elements
- **Touch targets**: Minimum 44x44px
- **Keyboard navigation**: Full support required
- **ARIA labels**: Required for screen readers
- **Focus states**: Visible and clear

### Visual & Sensory
- **No auto-play**: Videos, animations, or sounds
- **Reduced motion**: Respect `prefers-reduced-motion`
- **Calm mode**: Toggle to disable animations
- **No flashing**: Avoid strobing effects

### Forms
- **Labels**: Above inputs (not placeholders)
- **Error messages**: Clear, specific, next to field
- **Required fields**: Marked with "(required)" text
- **Validation**: Real-time, non-intrusive

## Component Guidelines

### Naming Conventions
- **Components**: PascalCase (e.g., `Button.vue`, `ContactForm.vue`)
- **Auto-import**: Components in folders get prefix (`UiButton`, `LayoutHeader`)
- **Composables**: camelCase with `use` prefix (e.g., `useAccessibility.ts`)

### Component Structure
```vue
<template>
  <!-- Template content -->
</template>

<script setup lang="ts">
// Script content
</script>
```

### Styling
- Use Tailwind CSS utility classes
- Custom colors: `primary` (#104927) and `accent` (#00bf62)
- Font classes: `font-heading` and `font-body`
- Max readable width: `max-w-readable` (70ch)

## File Changes & Validation

### Before Committing
1. **Linting**: `pnpm lint` must pass
2. **Type checking**: `pnpm typecheck` must pass (if enabled)
3. **Formatting**: `pnpm format:check` must pass
4. **Build**: `pnpm build` should succeed

### Pre-commit Hooks
- Automatically runs on `git commit`
- Runs ESLint with auto-fix
- Runs Prettier formatting
- Runs TypeScript type checking (for .ts and .vue files)
- Prevents commit if any check fails

## Content Management

### Nuxt Content
- Events stored in `content/events/` as markdown
- Frontmatter required: `title`, `date`, `description`
- Use `queryContent()` to fetch content

### Static Pages
- Core pages (About, Contact, etc.) are Vue components
- SEO meta tags via `useSeoMeta` composable

## Migration Guide

- Migration documentation in `migration-guide/` folder
- Reference original website HTML in `migration-guide/crawled-website/`
- Cross-check content using `migration-guide/CONTENT_MIGRATION_GUIDE.md`

## Development Workflow

1. **Make changes** to files
2. **Run linting**: `pnpm lint` (or let pre-commit handle it)
3. **Run typecheck**: `pnpm typecheck` (if TypeScript files changed)
4. **Format code**: `pnpm format` (or let pre-commit handle it)
5. **Test build**: `pnpm build` before pushing
6. **Commit**: Pre-commit hooks will validate automatically

### Image Processing

When working with images (logos, favicons, etc.):
- Use macOS `sips` command for resizing: `sips -Z <size> input.png --out output.png`
- Check dimensions first: `sips -g pixelWidth -g pixelHeight image.png`
- Store originals in `assets/images/`, optimized versions in `public/images/`
- See `README.md` "Image Processing" section for complete workflow and examples

## Important Notes

- **Never disable pre-commit hooks** - they prevent broken code
- **Always fix linting errors** before committing
- **Type errors must be resolved** before pushing
- **Accessibility is non-negotiable** - all features must be accessible
- **Follow the plan**: Reference `/Users/brown/.cursor/plans/ofald_website_revamp_7f33a840.plan.md` for project structure

## Common Commands

```bash
# Development
pnpm dev              # Start dev server
pnpm build            # Build for production
pnpm preview          # Preview production build

# Code Quality
pnpm lint             # Run ESLint
pnpm lint:fix         # Fix ESLint issues
pnpm format           # Format with Prettier
pnpm typecheck        # TypeScript type checking
pnpm check            # Run all checks (lint + typecheck + format check)
pnpm check:fix        # Fix all issues (lint:fix + format)
```

## When Making Changes

- **After file changes**: Linting and typechecking run automatically via pre-commit hooks
- **Before pushing**: Ensure `pnpm build` succeeds
- **If hooks fail**: Fix errors before committing
- **Never skip hooks**: Use `--no-verify` only in emergencies
